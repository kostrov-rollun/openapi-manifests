openapi: 3.0.0
info:
  version: "1"
  title: "SupplierRefunds"
  description: Manifest description
servers:
  - url: http://server-host/openapi/SupplierRefunds/v1
tags:
  - name: Refunds
paths:
  "/refunds/{id}":
    get:
      tags:
        - Refunds
      summary: 'Get info about specific resource'
      description: "Returns information of resource by id"
      parameters:
        - in: path
          name: id
          description: Id of resource
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 'Success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefundsResult'
        "500":
          description: 'Some internal error'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResult'
components:
  schemas:
    # Basic results components
    ErrorResult:
      type: object
      properties:
        messages:
          type: array
          items:
            $ref: "#/components/schemas/Message"
      description: "Message field is not required"
    Message:
      type: object
      properties:
        level:
          type: string
          enum:
            - emergency
            - alert
            - critical
            - error
            - warning
            - notice
            - info
        type:
          type: string
          enum:
            - UNDEFINED
            - LOGGER_MESSAGE
          description: >
            You can expose this enum for all your errors
            UNDEFINED - Any undefined message type
            LOGGER_MESSAGE - Same as undefined 
        text:
          type: string
          description: Message, that describes what went wrong
    SuccessResult:
      allOf:
        - $ref: '#/components/schemas/ErrorResult'
      type: object
      properties:
        data:
          type: object

    ## One resource result
    RefundsResult:
      allOf:
        - $ref: '#/components/schemas/SuccessResult'
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Refund'

    ## Resource object
    Refund:
      type: object
      properties:
        id:
          type: string
          description: Unique identificator of order (generated by server).
          example: "AP7734"
        supplierCode:
          type: string
          example: Autodist
          description: Code of supplier (same as id from https://rollun.net/suppliers)
        totalAmount:
          type: number
          description: Total amount of refund in USD including all taxes and any other charges. Can be null if the refund amount is not yet known.
          example: 10.45
          nullable: true
        items:
          type: array
          description: List of ordered products
          items:
            $ref: '#/components/schemas/RefundItem'
    
    RefundItem:
      type: object
      properties:
        rid:
          type: string
          description: >
            Rid, which corresponded to csn at the time of order creation.
            May be null if csn to rid match not found. in this case in messages will be warning message with type RID_BY_CSN_NOT_FOUND.
          example: VW6A4
          nullable: true
        csn:
          type: string
          description: Supplier internal item identifier
          example: CSN92
        orderNumber:
          type: string
          description: Order number to which the item belongs
          example: "AU002"
        qtyReturned:
          type: integer
          description: Quantity of returned items
          example: 2
          nullable: true
        unitPrice:
          type: number
          example: 10.47
          description: amount of return for one unit of item
          nullable: true
        subtotal:
          type: number
          example: 20.94
          nullable: true
          description: full amount of return for this item